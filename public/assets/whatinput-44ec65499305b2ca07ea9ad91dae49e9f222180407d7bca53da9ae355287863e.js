!function(e,t){"function"==typeof define&&define.amd?define([],function(){return t()}):"object"==typeof exports?module.exports=t():e.whatInput=t()}(this,function(){function e(e){clearTimeout(i),n(e),d=!0,i=setTimeout(function(){d=!1},1e3)}function t(e){d||n(e)}function n(e){var t=e.keyCode?e.keyCode:e.which,n=e.target||e.srcElement,o=p[e.type];"pointer"===o&&(o="number"==typeof e.pointerType?m[e.pointerType]:e.pointerType),a===o||!s&&a&&"keyboard"===o&&"tab"!==h[t]&&c.indexOf(n.nodeName.toLowerCase())>=0||(a=o,u.setAttribute("data-whatinput",a),-1===f.indexOf(a)&&f.push(a)),"keyboard"===o&&-1===r.indexOf(h[t])&&h[t]&&r.push(h[t])}function o(e){e=r.indexOf(h[e.keyCode?e.keyCode:e.which]),-1!==e&&r.splice(e,1)}var i,r=[],u=document.body,d=!1,a=null,c=["input","select","textarea"],s=u.hasAttribute("data-whatinput-formtyping"),p={keydown:"keyboard",mousedown:"mouse",mouseenter:"mouse",touchstart:"touch",pointerdown:"pointer",MSPointerDown:"pointer"},f=[],h={9:"tab",13:"enter",16:"shift",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"},m={2:"touch",3:"touch",4:"mouse"};return function(){var n="mousedown";window.PointerEvent?n="pointerdown":window.MSPointerEvent&&(n="MSPointerDown"),u.addEventListener?(u.addEventListener(n,t),u.addEventListener("mouseenter",t),"ontouchstart"in document.documentElement&&u.addEventListener("touchstart",e),u.addEventListener("keydown",t),u.addEventListener("keyup",o)):(u.attachEvent(n,t),u.attachEvent("mouseenter",t),"ontouchstart"in document.documentElement&&u.attachEvent("touchstart",e),u.attachEvent("keydown",t),u.attachEvent("keyup",o))}(),{ask:function(){return a},keys:function(){return r},types:function(){return f},set:n}});